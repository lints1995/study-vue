{"remainingRequest":"/Users/lin/Career/demo_vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/lin/Career/demo_vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/lin/Career/demo_vue/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/lin/Career/demo_vue/src/components/c-form/c-form-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lin/Career/demo_vue/src/components/c-form/c-form-item.vue","mtime":1624522085912},{"path":"/Users/lin/Career/demo_vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lin/Career/demo_vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lin/Career/demo_vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lin/Career/demo_vue/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFNjaGVtYSBmcm9tICJhc3luYy12YWxpZGF0b3IiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImMtZm9ybS1pdGVtIiwKICBpbmplY3Q6IFsiZm9ybSJdLAoKICAvLyDmjqXmlLbniLbnuqfkvKDpgJLnmoTlj4LmlbAKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3I6ICIiCiAgICB9OwogIH0sCgogIHByb3BzOiB7CiAgICBsYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBwcm9wOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyDnm5HlkKzlrZDnu4Tku7bnmoTpqozor4HpgJrnn6XvvIzmiafooYzmoKHpqozliqjkvZwKICAgIHRoaXMuJG9uKCJ2YWxpZGF0ZSIsICgpID0+IHsKICAgICAgdGhpcy52YWxpZGF0ZSgpOwogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgdmFsaWRhdGUoKSB7CiAgICAgIC8vIOW9k+WJjeinhOWImQogICAgICBjb25zdCBjdXJyZW50UnVsZXMgPSB0aGlzLmZvcm0ucnVsZXNbdGhpcy5wcm9wXTsgLy8g5b2T5YmN5YC8CgogICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmZvcm0ubW9kZWxbdGhpcy5wcm9wXTsgLy8g5qCh6aqM5o+P6L+w5a+56LGhCgogICAgICBjb25zdCBkZXNjID0gewogICAgICAgIFt0aGlzLnByb3BdOiBjdXJyZW50UnVsZXMKICAgICAgfTsgLy8g5a6e5L6L5YyW5qCh6aqM5a+56LGhCgogICAgICBjb25zdCBzY2hlbWEgPSBuZXcgU2NoZW1hKGRlc2MpOwogICAgICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlKHsKICAgICAgICBbdGhpcy5wcm9wXTogY3VycmVudFZhbHVlCiAgICAgIH0sIGVycm9ycyA9PiB7CiAgICAgICAgaWYgKGVycm9ycykgewogICAgICAgICAgLy8g5qCh6aqM5aSx6LSlCiAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3JzWzBdLm1lc3NhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOagoemqjOmAmui/hwogICAgICAgICAgdGhpcy5lcnJvciA9ICIiOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"sources":["c-form-item.vue"],"names":[],"mappings":";;;;;;;;AASA,OAAA,MAAA,MAAA,iBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,MAAA,EAAA,CAAA,MAAA,CAFA;;AAEA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AADA,KAAA;AAGA,GAPA;;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AAJA,GARA;;AAgBA,EAAA,OAAA,GAAA;AACA;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,MAAA;AACA,WAAA,QAAA;AACA,KAFA;AAGA,GArBA;;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,QAAA,GAAA;AACA;AACA,YAAA,YAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAFA,CAGA;;AACA,YAAA,YAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAJA,CAMA;;AACA,YAAA,IAAA,GAAA;AAAA,SAAA,KAAA,IAAA,GAAA;AAAA,OAAA,CAPA,CASA;;AACA,YAAA,MAAA,GAAA,IAAA,MAAA,CAAA,IAAA,CAAA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA;AAAA,SAAA,KAAA,IAAA,GAAA;AAAA,OAAA,EAAA,MAAA,IAAA;AACA,YAAA,MAAA,EAAA;AACA;AACA,eAAA,KAAA,GAAA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA,SAHA,MAGA;AACA;AACA,eAAA,KAAA,GAAA,EAAA;AACA;AACA,OARA,CAAA;AASA;;AArBA;AAtBA,CAAA","sourcesContent":["<template>\n  <div class=\"e-form-item\">\n    <label v-if=\"label\">{{ label }}</label>\n    <slot></slot>\n    <p v-if=\"error\">{{ error }}</p>\n  </div>\n</template>\n\n<script>\nimport Schema from \"async-validator\";\n\nexport default {\n  name: \"c-form-item\",\n  inject: [\"form\"], // 接收父级传递的参数\n  data() {\n    return {\n      error: \"\",\n    };\n  },\n  props: {\n    label: {\n      type: String,\n    },\n    prop: {\n      type: String,\n    },\n  },\n  mounted() {\n    // 监听子组件的验证通知，执行校验动作\n    this.$on(\"validate\", () => {\n      this.validate();\n    });\n  },\n  methods: {\n    validate() {\n      // 当前规则\n      const currentRules = this.form.rules[this.prop];\n      // 当前值\n      const currentValue = this.form.model[this.prop];\n\n      // 校验描述对象\n      const desc = { [this.prop]: currentRules };\n\n      // 实例化校验对象\n      const schema = new Schema(desc);\n      return schema.validate({ [this.prop]: currentValue }, (errors) => {\n        if (errors) {\n          // 校验失败\n          this.error = errors[0].message;\n        } else {\n          // 校验通过\n          this.error = \"\";\n        }\n      });\n    },\n  },\n};\n</script>\n"],"sourceRoot":"src/components/c-form"}]}