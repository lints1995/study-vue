{"remainingRequest":"/Users/lin/Career/demo_vue/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/lin/Career/demo_vue/src/components/c-drag-table/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lin/Career/demo_vue/src/components/c-drag-table/index.vue","mtime":1623831996923},{"path":"/Users/lin/Career/demo_vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lin/Career/demo_vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lin/Career/demo_vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lin/Career/demo_vue/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTb3J0YWJsZSBmcm9tICJzb3J0YWJsZWpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJkcmFnLXRhYmxlIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZTogMSwKICAgICAgdG90YWw6IDEwMDAsCiAgICAgIHRhYmxlQ29sdW1uczogWwogICAgICAgIHsKICAgICAgICAgIHByb3A6ICJuYW1lIiwKICAgICAgICAgIGxhYmVsOiAi5aeT5ZCNIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHByb3A6ICJkYXRlIiwKICAgICAgICAgIGxhYmVsOiAi5pel5pyfIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHByb3A6ICJhZGRyZXNzIiwKICAgICAgICAgIGxhYmVsOiAi5Zyw5Z2AIiwKICAgICAgICB9LAogICAgICBdLAogICAgICBkcm9wVGFibGVDb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAgcHJvcDogIm5hbWUiLAogICAgICAgICAgbGFiZWw6ICLlp5PlkI0iLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgcHJvcDogImRhdGUiLAogICAgICAgICAgbGFiZWw6ICLml6XmnJ8iLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgcHJvcDogImFkZHJlc3MiLAogICAgICAgICAgbGFiZWw6ICLlnLDlnYAiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHt9LAogIG1vdW50ZWQoKSB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgdGhpcy50YWJsZURhdGEucHVzaCh7CiAgICAgICAgZGF0ZTogIjIwMTYtMDUtMDMiLAogICAgICAgIG5hbWU6IGDnjovlsI8ke2l9YCwKICAgICAgICBhZGRyZXNzOiBg5LiK5rW35biC5pmu6ZmAICR7aX1gLAogICAgICB9KTsKICAgIH0KICAgIGRvY3VtZW50LmJvZHkub25kcm9wID0gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9OwogICAgdGhpcy5yb3dEcm9wKCk7CiAgICB0aGlzLmNvbHVtbkRyb3AoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoKSB7fSwKICAgIC8v6KGM5ouW5ou9CiAgICByb3dEcm9wKCkgewogICAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgIi50YWJsZTEgLmVsLXRhYmxlX19ib2R5LXdyYXBwZXIgdGJvZHkiCiAgICAgICk7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgU29ydGFibGUuY3JlYXRlKHRib2R5LCB7CiAgICAgICAgb25FbmQoeyBuZXdJbmRleCwgb2xkSW5kZXggfSkgewogICAgICAgICAgY29uc3QgY3VyclJvdyA9IF90aGlzLnRhYmxlRGF0YS5zcGxpY2Uob2xkSW5kZXgsIDEpWzBdOwogICAgICAgICAgX3RoaXMudGFibGVEYXRhLnNwbGljZShuZXdJbmRleCwgMCwgY3VyclJvdyk7CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgLy/liJfmi5bmi70KICAgIGNvbHVtbkRyb3AoKSB7CiAgICAgIGNvbnN0IHdyYXBwZXJUciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCiAgICAgICAgIi50YWJsZTEgLmVsLXRhYmxlX19oZWFkZXItd3JhcHBlciB0ciIKICAgICAgKTsKICAgICAgdGhpcy5zb3J0YWJsZSA9IFNvcnRhYmxlLmNyZWF0ZSh3cmFwcGVyVHIsIHsKICAgICAgICBhbmltYXRpb246IDE4MCwKICAgICAgICBkZWxheTogMCwKICAgICAgICBvbkVuZDogKGV2dCkgPT4gewogICAgICAgICAgY29uc3Qgb2xkSXRlbSA9IHRoaXMuZHJvcFRhYmxlQ29sdW1uc1tldnQub2xkSW5kZXhdOwogICAgICAgICAgdGhpcy5kcm9wVGFibGVDb2x1bW5zLnNwbGljZShldnQub2xkSW5kZXgsIDEpOwogICAgICAgICAgdGhpcy5kcm9wVGFibGVDb2x1bW5zLnNwbGljZShldnQubmV3SW5kZXgsIDAsIG9sZEl0ZW0pOwogICAgICAgICAgY29uc29sZS5sb2codGhpcy5kcm9wVGFibGVDb2x1bW5zKTsKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/c-drag-table","sourcesContent":["<template>\n  <div>\n    <el-table :data=\"tableData\" border class=\"table1\" ref=\"table1\">\n      <el-table-column\n        v-for=\"(item, index) in tableColumns\"\n        :key=\"index\"\n        :prop=\"dropTableColumns[index].prop\"\n        :label=\"item.label\"\n      >\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      :current-page=\"page\"\n      @current-change=\"handleCurrentChange\"\n      background\n      :total=\"total\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport Sortable from \"sortablejs\";\nexport default {\n  name: \"drag-table\",\n  data() {\n    return {\n      page: 1,\n      total: 1000,\n      tableColumns: [\n        {\n          prop: \"name\",\n          label: \"姓名\",\n        },\n        {\n          prop: \"date\",\n          label: \"日期\",\n        },\n        {\n          prop: \"address\",\n          label: \"地址\",\n        },\n      ],\n      dropTableColumns: [\n        {\n          prop: \"name\",\n          label: \"姓名\",\n        },\n        {\n          prop: \"date\",\n          label: \"日期\",\n        },\n        {\n          prop: \"address\",\n          label: \"地址\",\n        },\n      ],\n      tableData: [],\n    };\n  },\n  created() {},\n  mounted() {\n    for (let i = 0; i < 10; i++) {\n      this.tableData.push({\n        date: \"2016-05-03\",\n        name: `王小${i}`,\n        address: `上海市普陀 ${i}`,\n      });\n    }\n    document.body.ondrop = function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n    };\n    this.rowDrop();\n    this.columnDrop();\n  },\n  methods: {\n    handleCurrentChange() {},\n    //行拖拽\n    rowDrop() {\n      const tbody = document.querySelector(\n        \".table1 .el-table__body-wrapper tbody\"\n      );\n      const _this = this;\n      Sortable.create(tbody, {\n        onEnd({ newIndex, oldIndex }) {\n          const currRow = _this.tableData.splice(oldIndex, 1)[0];\n          _this.tableData.splice(newIndex, 0, currRow);\n        },\n      });\n    },\n    //列拖拽\n    columnDrop() {\n      const wrapperTr = document.querySelector(\n        \".table1 .el-table__header-wrapper tr\"\n      );\n      this.sortable = Sortable.create(wrapperTr, {\n        animation: 180,\n        delay: 0,\n        onEnd: (evt) => {\n          const oldItem = this.dropTableColumns[evt.oldIndex];\n          this.dropTableColumns.splice(evt.oldIndex, 1);\n          this.dropTableColumns.splice(evt.newIndex, 0, oldItem);\n          console.log(this.dropTableColumns);\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style></style>\n"]}]}